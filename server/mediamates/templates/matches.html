<!DOCTYPE html>
<html>
<head>
<title>Matches</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- VINTAGE FONT -->
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">

<style>
html, body {
  margin: 0;
  height: 100%;
  background: #8c927c;
}

/* Maintain 2048Ã—1147 aspect ratio (1.7855) */
.scaled-wrapper {
  width: 100vw;
  height: calc(100vw / 1.7855);
  max-height: 100vh;
  max-width: calc(100vh * 1.7855);
  margin: auto;
  position: relative;
}

.bg-image {
  position: absolute;
  inset: 0;
  background-image: url("static/images/matches.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

/* Home button */
.home-btn {
  position: absolute;
  top: 0%;
  left: 0%;
  width: 21.97%;
  height: 22.66%;
  cursor: pointer;
}

/* Film frame hitbox */
.match-box {
  position: absolute;
  width: 14%;
  height: 20%;
  cursor: pointer;
}

/* Username label */
.match-name {
  position: absolute;
  top: 87%;        /* updated lowering */
  left: 20%;
  width: 60%;
  height: 10%;
  font-size: 1.3vw;
  font-family: 'Special Elite', cursive;
  font-weight: bold;
  color: #6b3a15;
  text-align: center;
  cursor: pointer;
}

/* ROW positions */
.row1 { top: 34.5%; }
.row2 { top: 66.5%; }

/* COLUMN positions */
.col1 { left: 7.5%; }
.col2 { left: 31%; }
.col3 { left: 54.5%; }
.col4 { left: 78%; }

/* Popup overlay */
.popup-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0; left: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  z-index: 20;
}

/* Popup box */
.popup-box {
  position: absolute;
  width: 22%;
  height: 12%;
  background: #fff8dc;
  border: 4px solid #6b3a15;
  border-radius: 10px;
  text-align: center;
  font-family: 'Special Elite', cursive;
  padding-top: 10px;
  display: none;
  z-index: 25;
}

/* Popup text */
.popup-title {
  font-size: 1.4vw;
  font-weight: bold;
  color: #6b3a15;
}
.popup-line {
  font-size: 1.1vw;
  color: #6b3a15;
}
</style>
</head>

<body>

<div class="scaled-wrapper">
  <div class="bg-image"></div>

  <div class="home-btn" onclick="window.location.href='/home'"></div>

  <!-- ROW 1 -->
  <div class="match-box row1 col1">
    <div class="match-name" onclick="showPopup('{{ matches[0] }}', this)">
      {{ matches[0] }}
    </div>
  </div>

  <div class="match-box row1 col2">
    <div class="match-name" onclick="showPopup('{{ matches[1] }}', this)">
      {{ matches[1] }}
    </div>
  </div>

  <div class="match-box row1 col3">
    <div class="match-name" onclick="showPopup('{{ matches[2] }}', this)">
      {{ matches[2] }}
    </div>
  </div>

  <div class="match-box row1 col4">
    <div class="match-name" onclick="showPopup('{{ matches[3] }}', this)">
      {{ matches[3] }}
    </div>
  </div>

  <!-- ROW 2 -->
  <div class="match-box row2 col1">
    <div class="match-name" onclick="showPopup('{{ matches[4] }}', this)">
      {{ matches[4] }}
    </div>
  </div>

  <div class="match-box row2 col2">
    <div class="match-name" onclick="showPopup('{{ matches[5] }}', this)">
      {{ matches[5] }}
    </div>
  </div>

  <div class="match-box row2 col3">
    <div class="match-name" onclick="showPopup('{{ matches[6] }}', this)">
      {{ matches[6] }}
    </div>
  </div>

  <div class="match-box row2 col4">
    <div class="match-name" onclick="showPopup('{{ matches[7] }}', this)">
      {{ matches[7] }}
    </div>
  </div>

</div>

<!-- Popup overlay -->
<div id="popup-overlay" class="popup-overlay" onclick="closePopup()"></div>

<!-- Popup box -->
<div id="popup-box" class="popup-box">
  <div id="popup-user" class="popup-title">User</div>
  <div id="popup-compat" class="popup-line">Compatibility: 0%</div>
  <div id="popup-music" class="popup-line">Shared Music: 0%</div>
  <div id="popup-film" class="popup-line">Shared Films: 0%</div>
</div>

<script>
function showPopup(username, element) {
  document.getElementById("popup-user").innerText = username;
  document.getElementById("popup-compat").innerText = "Compatibility: 87%";
  document.getElementById("popup-music").innerText = "Shared Music: 68%";
  document.getElementById("popup-film").innerText = "Shared Films: 74%";

  let overlay = document.getElementById("popup-overlay");
  let popup = document.getElementById("popup-box");
  overlay.style.display = "block";
  popup.style.display = "block";

  let rect = element.parentElement.getBoundingClientRect();

  popup.style.left = (rect.left + rect.width * 0.5) + "px";
  popup.style.top  = (rect.top + rect.height * 0.72) + "px";
  popup.style.transform = "translate(-50%, -50%)";
}

function closePopup() {
  document.getElementById("popup-overlay").style.display = "none";
  document.getElementById("popup-box").style.display = "none";
}
</script>

</body>
</html>
